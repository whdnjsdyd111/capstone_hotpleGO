<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="~{user/default}">
<th:block layout:fragment="styles">
    <style>
        .c-index {
            border-radius: 50px;
            height: 50px;
            width: 50px;
            font-size: xx-large;
        }

        .m-index {
            border-radius: 25px;
            height: 25px;
            width: 25px;
        }

        span {
            word-break: keep-all;
        }

        .itemBoxHighlight {
            border: solid 1px black;
            background-color: #6f6a6c;
            width: 1040px;
            height: 300px;
        }

        @media(max-width: 1200px) {
            .itemBoxHighlight {
                border: solid 1px black;
                background-color: #6f6a6c;
                width: 860px;
                height: 300px;
            }
        }

        @media(max-width:992px) {

            .c-index {
                border-radius: 25px;
                height: 25px;
                width: 25px;
                font-size:18px
            }

            .itemBoxHighlight {
                border: solid 1px black;
                background-color: #6f6a6c;
                width: 620px;
                height: 300px;
            }
        }

        @media(max-width:767px){
            .itemBoxHighlight {
                border: solid 1px black;
                background-color: #6f6a6c;
                width: 470px;
                height: 300px;
            }
        }

        @media(max-width:750px){
            div>img{
                width:150px!important;
                height: 150px!important;
            }
            span{
                font-size: 8px;
            }
            .c-index{
                width: 23px;
                height: 23px;
                font-size: 15px;
            }

            .itemBoxHighlight {
                border: solid 1px black;
                background-color: #6f6a6c;
                width: 470px;
                height: 150px;
            }
        }
    </style>
    <th:block th:if="${courseInfos.size() > 0}">
        <script src="/css/user/user_usingCourse.js"></script>
        <script src="/css/vendor/jq/jquery-ui.min.js"></script>
    </th:block>
    <th:block th:if="${courseInfos.size() == 0}">
        <script>
            $(function() {
                $('#course_delete').click(function() {
                    swal("코스 삭제", "해당 코스를 삭제하시겠습니까?", "warning", {
                        buttons: {
                            cancel : "취소",
                            yes : "삭제",
                        },
                    }).then(v => {
                        if (v === "yes") requestServlet({
                            csCode : $('#course_delete').next().val(),
                        }, "/delete-course", function(data) {
                            swal("삭제 성공!", data, "success").then(() => { location.href = "/myCourse?kind=myCourse" });
                        }, basicErrorFunc);
                    });
                });
            })
        </script>
    </th:block>
</th:block>
<div layout:fragment="content">
    <input type="hidden" id="csCode" th:value="${course.csCode}">
    <div th:replace="user/courseNav :: course"></div>
    <th:block th:if="${courseInfos.size() > 0}">
        <div class="container my-2">
            <div id="map_div"></div>
        </div>
        <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=l7xxcd9bdd0942b542fd8c7be931fc11a3b4"></script>
        <script th:inline="javascript">
            let htList = [[${courseInfos}]];
        </script>
        <div class="container">
            <div class="d-flex flex-column my-3">
                <div class="my-3">
                    <span class="font-weight-bold mx-5" th:text="|함께하는 사람 : *{course.csWith}|">함께하는 사람 : 친구</span>
                    <span class="font-weight-bold mx-5" th:text="|인원 : *{course.csNum}|">인원 : 3명</span>
                    <span id="total_distance"></span>
                </div>
                <ul id="sortable">
                    <th:block th:each="num : ${#numbers.sequence(0, courseInfos.size() - 1)}">
                        <li style="display: block;">
                            <hr class="col"/>
                            <div class="d-flex justify-content-around my-3">
                                <span class="my-auto c-index font-weight-bold" th:text="${num + 1}">1</span>
                                <img style="width: 300px; height: 300px;" alt="이미지 없음"
                                     th:src="${#hotpleAPI.toImg(courseInfos.get(num).uploadPath, courseInfos.get(num).uuid,
                                     courseInfos.get(num).fileName, #hotpleAPI.IMAGE)}">
                                <div class="d-flex flex-column my-auto" style="width:160px;">
                                    <span th:text="|*{courseInfos.get(num).busnName}|">가게 이름 ( 대략 소요 시간 30분)</span>
                                    <span th:text="|*{courseInfos.get(num).htAddr}|">도로명 주소</span>
                                    <th:block th:if="${courseInfos.get(num).csCode.split('/')[2] == 'N'}">
                                        <button type="button" class="btn-danger mx-auto delete-hotple">삭제</button>
                                    </th:block>
                                    <input type="hidden" th:value="${courseInfos.get(num).htId}">
                                </div>
                            </div>
                        </li>
                    </th:block>
                </ul>
                <hr class="col"/>
            </div>
        </div>
        <th:block th:if="${courseInfos.get(0).csCode.split('/')[2] == 'N'}">
            <div class="d-flex justify-content-center">
                <button type="button" class="btn-info" id="pickBtn">찜하기</button>
                <button type="button" class="btn-success" id="course_use">코스 이용</button>
                <button type="button" class="btn-warning" id="course_delete">코스 삭제</button>
            </div>
        </th:block>
    </th:block>
    <th:block th:if="${courseInfos.size() == 0}">
        <div class="jumbotron">
            <a href="/" class="h1">코스에 핫플들을 추가해주세요!</a>
        </div>
    </th:block>
    <th:block th:if="${courseInfos.size() == 0}">
        <div class="d-flex justify-content-around">
            <button type="button" class="btn-warning" id="course_delete">코스 삭제</button>
            <input type="hidden" th:value="${course.csCode}">
        </div>
    </th:block>
</div>
</html>