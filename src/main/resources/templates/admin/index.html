<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="~{admin/default}">
<div layout:fragment="content">
    <div class="row">
        <div class="col-12">
            <h2 class="border-bottom pb-3">Dashboard<small class="ml-3 text-secondary">notice your app data</small></h2>
        </div>
    </div>
    <div class="row">
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-12 mb-3">
            <div class="row no-gutters">
                <div class="card w-100 flex-row text-center" style="height: 150px;">
                    <a href="memberManagement.do" class="stretched-link"></a>
                    <div class="col-5" style="background-color: #5cb85c">
                        <i class="fa fa-calendar-check-o fa-5x ml-1" style="padding-top: 35px;"></i>
                    </div>
                    <div class="col-7">
                        <div class="card-body">
                            <p class="card-text">TOTAL</p>
                            <h4 class="card-title">토탈 사용자 수</h4>
                            <p class="card-text">사용자</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-12 mb-3">
            <div class="row no-gutters">
                <div class="card w-100 flex-row text-center" style="height: 150px;">
                    <a href="contentsManagement.do?search=board&sort=recent" class="stretched-link"></a>
                    <div class="col-5" style="background-color: #4CB1CF">
                        <i class="fa fa-list-alt fa-5x ml-1" style="padding-top: 35px;"></i>
                    </div>
                    <div class="col-7">
                        <div class="card-body">
                            <p class="card-text">TOTAL</p>
                            <h4 class="card-title">토탈 게시판 수</h4>
                            <p class="card-text">게시판</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-12 mb-3">
            <div class="row no-gutters">
                <div class="card w-100 flex-row text-center" style="height: 150px;">
                    <a href="contentsManagement.do?search=board&sort=recent" class="stretched-link"></a>
                    <div class="col-5" style="background-color: #f0ad4e">
                        <i class="fa fa-comment-o fa-5x ml-1" style="padding-top: 35px;"></i>
                    </div>
                    <div class="col-7">
                        <div class="card-body">
                            <p class="card-text">TOTAL</p>
                            <h4 class="card-title">토탈 댓글 수</h4>
                            <p class="card-text">댓글</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-12 mb-3">
            <div class="row no-gutters">
                <div class="card w-100 flex-row text-center" style="height: 150px;">
                    <a href="contentsManagement.do?search=board&sort=recent" class="stretched-link"></a>
                    <div class="col-5" style="background-color: #f0ad4e">
                        <i class="fa fa-comment-o fa-5x ml-1" style="padding-top: 35px;"></i>
                    </div>
                    <div class="col-7">
                        <div class="card-body">
                            <p class="card-text">TOTAL</p>
                            <h4 class="card-title">유저 코스 이용 수</h4>
                            <p class="card-text">코스</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-12 mb-3">
            <div class="row no-gutters">
                <div class="card w-100 flex-row text-center" style="height: 150px;">
                    <a href="contentsManagement.do?search=board&sort=recent" class="stretched-link"></a>
                    <div class="col-5" style="background-color: #f0ad4e">
                        <i class="fa fa-comment-o fa-5x ml-1" style="padding-top: 35px;"></i>
                    </div>
                    <div class="col-7">
                        <div class="card-body">
                            <p class="card-text">TOTAL</p>
                            <h4 class="card-title">유저 리뷰 이용 수</h4>
                            <p class="card-text">리뷰</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-12 mb-3">
            <div class="row no-gutters">
                <div class="card w-100 flex-row text-center" style="height: 150px;">
                    <a href="report.do" class="stretched-link"></a>
                    <div class="col-5" style="background-color: #F0433D">
                        <i class="fa fa-fire fa-5x ml-1" style="padding-top: 35px;"></i>
                    </div>
                    <div class="col-7">
                        <div class="card-body" style="padding-top: 35px;">
                            <h4 class="card-title">신고 수</h4>
                            <p class="card-text">신고</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-xs-12 mb-3">
            <div class="row no-gutters">
                <div class="card w-100 flex-row text-center" style="height: 150px;">
                    <a href="report.do" class="stretched-link"></a>
                    <div class="col-5" style="background-color: #F0433D">
                        <i class="fa fa-fire fa-5x ml-1" style="padding-top: 35px;"></i>
                    </div>
                    <div class="col-7">
                        <div class="card-body" style="padding-top: 35px;">
                            <h4 class="card-title">제휴 수</h4>
                            <p class="card-text">제휴</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        let dates = [];

/*        <c:forEach var="date" items="${ dates }">
            dates.push('<c:out value="${ date }" />');
        </c:forEach>*/

        for (let i = 0; i < 6; i++) {
            dates.push(i);
        }

        let visits = [];

/*        <c:forEach begin="0" end="6" step="1" var="i">
            visits.push('<c:out value="${ chart_visit_rs.rowsByIndex[i][0] }" />');
        </c:forEach>*/

        for (let i = 0; i < 6; i++) {
            visits.push(6 - i);
        }

        let page_views = [];

/*        <c:forEach begin="0" end="6" step="1" var="i">
            page_views.push('<c:out value="${ chart_page_view_rs.rowsByIndex[i][0] }" />');
        </c:forEach>*/

        for (let i = 0; i < 6; i++) {
            page_views.push(i);
        }

        let boards = [];

/*        <c:forEach begin="0" end="6" step="1" var="i">
            boards.push('<c:out value="${ chart_boards_rs.rowsByIndex[i][0] }" />');
        </c:forEach>*/

        for (let i = 0; i < 6; i++) {
            boards.push(i + 5);
        }

        let comments = [];

/*        <c:forEach begin="0" end="6" step="1" var="i">
            comments.push('<c:out value="${ chart_comments_rs.rowsByIndex[i][0] }" />');
        </c:forEach>*/

        for (let i = 0; i < 6; i++) {
            comments.push(i);
        }
    </script>
    <div class="row">
        <div class="col-xl-6 col-md-12 mb-3">
            <canvas id="memCanvas"></canvas>
            <script>
                var lineChartData = {
                    labels: dates,
                    datasets: [{
                        label: '방문자 수',
                        fill: false,
                        backgroundColor: 'rgba(255, 99, 132)',
                        borderColor: 'rgba(255, 99, 132)',
                        data: visits
                    }, {
                        label: '페이지 뷰',
                        backgroundColor: 'rgba(54, 162, 235)',
                        borderColor: 'rgba(54, 162, 235)',
                        fill: false,
                        data: page_views
                    }]
                };

                var lineChartOpt = {
                    responsive: true,
                    hoverMode: 'index',
                    stacked: false,
                    title: {
                        display: true,
                        text: '최근 방문자 현황'
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                };

                var mem_ctx = document.getElementById('memCanvas').getContext('2d');
                window.myLine = Chart.Line(mem_ctx, {
                    type: 'line',
                    data: lineChartData,
                    options: lineChartOpt
                });

            </script>
        </div>
        <div class="col-xl-6 col-md-12 mb-3">
            <canvas id="contentsCanvas"></canvas>
            <script>
                let contents_ctx = document.getElementById('contentsCanvas').getContext('2d');

                let purple_trans = [];
                let purple = [];

                let orange_trans = [];
                let orange = [];

                let barChartData = {
                    labels: dates,
                    datasets: [{
                        label: '게시판',
                        data: boards,
                        backgroundColor: 'rgba(255, 159, 64, 0.2)',
                        borderColor: 'rgba(255, 159, 64, 1)',
                        borderWidth: 1
                    }, {
                        label: '댓글',
                        data: comments,
                        backgroundColor: 'rgba(153, 102, 255, 0.2)',
                        borderColor: 'rgba(153, 102, 255, 1)',
                        borderWidth: 1
                    }],
                }

                let barChartOpt = {
                    type: 'bar',
                    data: barChartData,
                    title: {
                        display: true,
                        text: '최근 콘텐츠 현황'
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        }
                    }
                }

                window.myBar = new Chart(contents_ctx, {
                    type: 'bar',
                    data: barChartData,
                    options: barChartOpt
                });
            </script>
        </div>
    </div>
    <div class="row">
        <div class="col-xl-4 col-md-12 mb-3 overflow-auto">
            <div class="text-center bg-dark" style="height: 250px;">
                <div class="table-responsive" style="word-break: keep-all;">
                    <table class="table table-striped table-dark table-borderless table-sm">
                        <caption class="text-warning"><i class="fa fa-user-circle fa-2x ml-2"></i> 새 회원</caption>
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">이메일</th>
                            <th scope="col">닉네임</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <th scope="row">번째</th>
                            <th>회원 이메일</th>
                            <th>닉네임</th>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-md-12 mb-3 overflow-auto">
            <div class="text-center bg-danger" style="height: 250px;">
                <div class="bg-danger">
                    <table class="table table-hover table-danger table-sm mb-0">
                        <caption class="text-warning"><i class="fa fa-list fa-2x ml-2"></i> 새 게시글</caption>
                        <thead>
                        <tr>
                            <th scope="col">번호</th>
                            <th scope="col">제목</th>
                            <th scope="col">내용</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr onclick="location.href = '#'" class="hov">
                            <th scope="row">번째</th>
                            <th>게시글 제목</th>
                            <th><span class="new_bds">게시글 요약 내용</span></th>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-md-12 mb-3 overflow-auto">
            <div class="text-center bg-success" style="height: 250px;">
                <div class="bg-success">
                    <table class="table table-hover table-success table-sm mb-0">
                        <caption class="text-warning"><i class="fa fa-comment fa-2x ml-2"></i> 새 댓글</caption>
                        <thead>
                        <tr>
                            <th scope="col">번호</th>
                            <th scope="col">닉네임</th>
                            <th scope="col">내용</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr onclick="location.href = '#'" class="hov">
                            <th scope="row">번째</th>
                            <th>댓글 작성자 닉네임</th>
                            <th><span class="new_bds">댓글 요약 내용</span></th>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4 col-sm-6 col-xs-12 mb-3">
            <div class="bg-dark d-flex flex-column text-center text-light">
                <i class="fa fa-id-badge fa-5x mt-2"></i>
                <span>관리자 이름</span>
                <span class="mb-2">관리자 이메일</span>
                <hr>
                <table class="table table-borderless text-white table-sm">
                    <tr>
                        <th scope="col">위임일</th>
                        <td>관리자 위임일</td>
                    </tr>
                    <tr>
                        <th scope="row">사용 닉네임</th>
                        <td>사용 닉네임</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-md-4 col-sm-6 col-xs-12 mb-3">
            <h3 class="font-weight-bold p-3">접속중인 관리자</h3>
            <div id="visitors">
                <!--<jsp:include page="visitor.jsp" />-->
            </div>
        </div>
        <div id="memo_div" class="col-xl-4 col-xs-12 mb-3">
            <!--<jsp:include page="memo.jsp" />-->
        </div>
    </div>
</div>
</html>